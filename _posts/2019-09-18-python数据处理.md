---
title: python数据简单处理
categories: python
---
xml，html，json数据的处理方式

# xml处理

常见的库为`xml`和`lxml`,`lxml`包含更多的功能，并且可以解析lxml和xml。

- 读取解析xml文件。并得到root element
```python
from lxml import etree
root = etree.fromstring('')
#ElementTree
tree = etree.parse('filePath')
root = tree.getroot()
```

## element

通过getchildren方法，或者直接迭代，得到子element。

```python
for child in root.getchildren():
    pass
for child in root:
    pass
```

`ele.tag` 得到标签名
`ele.attrib['name']`  得到属性

```python
for child in root.getchildren():
    if child.tag == 'struct':
        child.get('desc')
```


# html处理

```python
from lxml import etree
html = etree.HTML(data.text)
html.xpath('xpath')
```

## xpath

XPath 使用路径表达式在 XML 文档中选取节点。在chrome浏览器调试工具中，可以copy指定element的xpath。
还可以在chrome console控制台验证xpath`$x("//img")`



- 下面列出了最有用的路径表达式

|表达式|	描述|
|--|--|
nodename|选取此节点的所有子节点。
/	|从根节点选取。
//	|从匹配选择的当前节点选择文档中的节点，而不考虑它们的位置。
.	|选取当前节点。
..	|选取当前节点的父节点。
@	|选取属性。

- 示例

|示例|描述|
--|--
td/a/@href	|td的所有节点，a的href属性
//title[@lang='eng']	|选取所有 title 元素，且这些元素拥有值为 eng 的 lang 属性。
//span[@class='red']/text()	|同上，但是不是选取整个标签，而只是内容
.//td	|选了后，再选择子节点

# json处理

```python
import json
string = json.dumps(map)
json.loads('')
json.load(file)
```

